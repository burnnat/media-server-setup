<VirtualHost *:80> 
  ProxyPreserveHost On
  ProxyRequests Off
  ServerName home.na.burnskids.com
  Redirect permanent / https://home.na.burnskids.com/
  ProxyPass /.well-known/acme-challenge http://localhost:8023/
  ProxyPassReverse /.well-known/acme-challenge http://localhost:8023/
</VirtualHost> 
<VirtualHost *:443>
  ServerName home.na.burnskids.com
  SSLEngine On
  ProxyRequests Off
  ProxyPreserveHost On
  SSLCertificateFile /etc/letsencrypt/live/home.na.burnskids.com/fullchain.pem
  SSLCertificateKeyFile /etc/letsencrypt/live/home.na.burnskids.com/privkey.pem
  ProxyPass / http://localhost:8123/
  ProxyPassReverse / http://localhost:8123/
  ProxyPass /api/websocket ws://localhost:8123/api/websocket
  ProxyPassReverse /api/websocket ws://localhost:8123/api/websocket
  RewriteEngine On
  RewriteCond %{HTTP:Upgrade} =websocket [NC]
  RewriteRule /(.*) ws://localhost:8123/$1 [P,l]
  RewriteCond %{HTTP:Upgrade} !=websocket [NC]
  RewriteRule /(.*) http://localhost:8123/$1 [P,l]
</VirtualHost>
